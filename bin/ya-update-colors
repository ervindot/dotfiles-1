#!/bin/bash

# source pywal color scheme
source $HOME/.cache/wal/colors.sh

function updateColorScheme {

    if [ $(pidof yabar | wc -w) > 0 ];
    then
        kill $(pidof yabar)
    fi

    # delete old yabar temp files
    rm /tmp/yabar*

    # execute /usr/local/bin yabar
    yabar
    # 1- replace first 2 occurrences of 0x-hex color with sourced pywal bg color
    # awk -v bg=$bg '/0x/ {
    #     if (count < 2)
    #         gsub(/0x.+[^;]/,"bg");
    #         count++;
    # }' $HOME/.dotfiles/config/yabar/*.conf
    # sed -ri "0,/0x.+/{s/0x.+/$bg/};s/#[0-9A-Za-z]+{6}/$fg/g" \
    #   $HOME/.dotfiles/config/yabar/*.conf

    # 2- replace all occurrences of #-hex colors(pango) with a sourced pywal color
    # sed -ri "s/#[0-9A-Za-z]+{6}/$fg/g" \
    #    $HOME/.dotfiles/config/yabar/*.conf
}

updateColorScheme

